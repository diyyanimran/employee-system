<div class="page-container">
    <div class="table-container">
        <table mat-table [dataSource]="requests" class="mat-elevation-z8">

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Name </th>
                <td mat-cell *matCellDef="let row"> {{row.name}}</td>
            </ng-container>

            <ng-container matColumnDef="role">
                <th mat-header-cell *matHeaderCellDef> Role </th>
                <td mat-cell *matCellDef="let row"> {{row.role}}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let row">
                    <button 
                    mat-icon-button 
                    [matMenuTriggerFor]="contextMenu" 
                    #menuTrigger="matMenuTrigger"
                    (click)="selectedRow = row">
                        <mat-icon>more_horiz</mat-icon>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                (contextmenu)="openContextMenu($event, row)" class="clickable-row"></tr>
        </table>

        <mat-menu #contextMenu="matMenu">
            <button mat-menu-item (click)="approve(selectedRow)">
                <mat-icon>done</mat-icon>
                Approve
            </button>
            <button mat-menu-item (click)="reject(selectedRow)">
                <mat-icon>close</mat-icon>
                Reject
            </button>
        </mat-menu>
    </div>
</div>